<% provide(:current_page, "Permissões de Usuários") %>  <!--Titulo no content header-->
<% provide(:current_page_version, "Conceder ou Remover Permissões") %> <!--Versão do aplicativo-->

<% content_for :left_side do %>
  <%= render 'left_side' %>
<% end %>


<div class="box box-default">
  <div class="box box-primary">
    <div class="box-header with-border">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th style="width: 10px">#</th>
            <th>Nome</th>
            <th>Email</th>
            <th>Permissões</th>
            <th colspan="3">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% if @users.empty? %>
          <tr>
            <td colspan="5" style="text-align: center"><h3>Nem um usuário encontrado.</h3></td>
          </tr>
          <% end %>
        <% @users.each_with_index do |user, index| %>
        <tr>
          <td class="col-xs-1"><%= index+1 %></td>
          <td class="col-xs-3"><%= "#{user.person.full_name}" %></td>
          <td class="col-xs-3"><%= user.email %></td>
          <td class="col-xs-4">
            <% user.permissions.each do |permission| %>
              <span class="label label-info" data-toggle="tooltip" data-placement="top" title="<%= permission.description %>"><%= permission.human_name %></span>
            <% end %>
          </td>
          <td class="col-xs-1">
            <%= link_to edit_user_permission_path(user) do %>
              <i class="fa fa-2x fa-edit"></i>
            <% end %>
          </td>
        </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
